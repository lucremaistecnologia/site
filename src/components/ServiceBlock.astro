---
interface Props {
  title: string;
  description: string;
  linkText: string;
  linkHref: string;
  class?: string /* Add optional class prop */;
}

const {
  title,
  description,
  linkText,
  linkHref,
  class: className,
} = Astro.props;
---

<div class={`service-block ${className || ""}`}>
  <div class="service-content">
    <h3>{title}</h3>
    <p class="service-description">{description}</p>
    <a href={linkHref} class="link-with-arrow">{linkText}</a>
  </div>
</div>

<style>
  .service-block {
    position: relative;
    background-color: hsla(220, 16%, 14%, 0.92);
    background-size: cover;
    background-position: 50% 16%;
    border: var(--border);
    border-radius: clamp(1rem, 1.5cqw, 8rem);
    text-align: left;
    color: var(--color-button-text);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: end;
    gap: 0.5em;
    box-shadow: 0px 4px 10px hsla(0, 0%, 0%, 0.2);
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
    overflow: hidden;
    cursor: pointer;
    min-height: 35cqh;
    container-type: inline-size;
  }

  .service-content {
    position: relative;
    padding: clamp(1.3rem, 3vw, 6rem);
    container-type: inline-size;
    width: 100cqw;
  }

  .service-content::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 190%;
    background: linear-gradient(
      to top,
      hsla(228, 12%, 6%, 1) 0%,
      hsla(228, 12%, 10%, 0) 100%
    );
    opacity: 0.7;
    transition: opacity 0.3s ease;
    z-index: 1;
  }

  .service-block:hover .service-content::after {
    opacity: 1;
    backdrop-filter: blur(1px);
  }

  .service-block h3 {
    font-size: clamp(1.8em, 2.9vw, 4rem);
    margin-bottom: 0.5em;
    color: var(--color-button-text);
    width: min(13.78ch, 100cqw);
    position: relative;
    z-index: 2;
  }

  .service-description {
    font-size: clamp(1em, 1.3vw, 1.6rem);
    line-height: var(--line-height-base);
    margin-bottom: 1.5em;
    width: min(35ch, 100cqw);
    max-height: 0;
    overflow: hidden;
    position: relative;
    z-index: 2;
    opacity: 0; /* Hidden by default */
    transition:
      opacity 0.3s ease,
      max-height 0.3s ease;
  }

  .service-block:hover .service-description {
    opacity: 1; /* Visible on hover */
    max-height: 20em; /* Adjust as needed to fit content */
  }

  .service-block a {
    position: relative;
    z-index: 2;
  }
  .service-block-1 {
    grid-area: block-1;
   background-image: url("/atendimento.webp");
  }
  .service-block-2 {
    grid-area: block-2;
    background-image: url("/taxas.webp");
  }
  .service-block-3 {
    grid-area: block-3;
    background-image: url("/aprovação.webp");
  }
  .service-block-4 {
    grid-area: block-4;
    background-image: url("/ofertas.webp");
  }
</style>
